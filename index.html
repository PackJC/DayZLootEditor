<!DOCTYPE html>
<html lang="eng" class="bg-dark">
  <head>
    <meta charset="UTF-8">
    <link href="./node_modules/bootstrap/dist/css/bootstrap.css" rel="stylesheet" crossorigin="anonymous">
    <link href="./styles.css" rel="stylesheet">
    <title>XML Editor : DayZ Standalone</title>
  </head>
  <body class="bg-dark text-white">
  <nav class="navbar navbar-expand navbar-light border-warning border-bottom" style="background-color: rgba(0, 0, 0, 0.2);">
    <ul class="navbar-nav p-0">
      <li class="nav-item align-self-center p-1">
        <img src="./media/DayZLogo.png" class="img-fluid" alt="DayZ Logo"/>
      </li>
      <li class="nav-item p-3 align-self-center active">
        <button  class="nav-link btn btn-warning" id="getFile">Import XML Files</button>
      </li>
      <li class="nav-item p-3 align-self-center">
        <a class="nav-link btn btn-warning disabled save-btn" id="saveFile">Save</a>
      </li>
      <li class="nav-item p-3 align-self-center">
        <a class="nav-link  btn btn-warning" id="help">Help</a>
      </li>
    </ul>
  </nav>
  <table class="bg-warning text-black m-3 p-3 h6" id="myTable">
    <tr>
      <th>Name</th>
      <th>Nominal</th>
      <th>Lifetime</th>
      <th>Restock</th>
      <th>Min</th>
      <th>QuantMin</th>
      <th>QuantMax</th>
      <th>Cost</th>
      <th>Flags</th>
      <th>Category</th>
      <th>Usage</th>
      <th>Value</th>
    </tr>
  </table>
  </body>
  <footer class="bg-dark text-center text-warning fixed-bottom border-warning border-top">
    <div class="text-center" style="background-color: rgba(0, 0, 0, 0.2);">
      Â© 2022 PackJC Version 0.60
    </div>
  </footer>
</html>

<script src="./renderer.js">

</script>
<script>
  const {ipcRenderer} = require("electron");
  ipcRenderer.on("receiveDataReply",(event,data)=>{
    //console.log("successful file upload")
    data.types.type.forEach(element =>
            document.getElementById( 'myTable' ).innerHTML +=
                    '<tr id = "row">' +
                      '<td>' + element.$.name.toString() + '</td>' +
                      '<td contenteditable>' + element.nominal + '</td>' +
                      '<td contenteditable>' + element.lifetime + '</td>' +
                      '<td contenteditable>' + element.restock + '</td>' +
                      '<td contenteditable>' + element.min + '</td>' +
                      '<td contenteditable>' + element.quantmin + '</td>' +
                      '<td contenteditable>' + element.quantmax + '</td>' +
                      '<td contenteditable>' + element.cost + '</td>' +
                      '<td contenteditable>' + element.flags+ '</td>' +
                      '<td contenteditable>' + element.category + '</td>' +
                      '<td contenteditable>' + element.usage + '</td>' +
                      '<td contenteditable>' + element.value + '</td>' +
                    '</tr>'
    );
    document.querySelector('.save-btn').classList.remove('disabled')
  })

  document.getElementById("getFile").addEventListener("click",getFileFunction);
  document.getElementById("saveFile").addEventListener("click", saveFileFunction);

  function getFileFunction(){
    ipcRenderer.send("getFileEvent")
  }
  function saveFileFunction(){
    ipcRenderer.send("saveFileEvent")
  }
  document.getElementById("help").addEventListener("click",getHelp);
  function getHelp(){
    window.location.href = "help.html";
  }
</script>
